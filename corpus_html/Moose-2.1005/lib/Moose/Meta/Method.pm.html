<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
 <head>
  <title>[untitled]</title>
  <link rel="stylesheet" type="text/css" href="../../t/vim_syntax.css" />
 </head>
 <body>

<pre><span class="synStatement">package</span><span class="synType"> Moose::Meta::Method</span>;
<span class="synPreProc">BEGIN </span>{
  <span class="synIdentifier">$</span><span class="synType">Moose::Meta::Method::</span><span class="synIdentifier">AUTHORITY</span> = <span class="synString">'cpan:STEVAN'</span>;
}
{
  <span class="synIdentifier">$</span><span class="synType">Moose::Meta::Method::</span><span class="synIdentifier">VERSION</span> = <span class="synString">'2.1005'</span>;
}

<span class="synStatement">use strict</span>;
<span class="synStatement">use warnings</span>;

<span class="synStatement">use </span>Class::MOP::MiniTrait;

<span class="synStatement">use base</span> <span class="synString">'Class::MOP::Method'</span>;

Class::MOP::MiniTrait::apply(<span class="synperlPackageConst">__PACKAGE__</span>, <span class="synString">'Moose::Meta::Object::Trait'</span>);

<span class="synKeyword">sub </span><span class="synFunction">_error_thrower </span>{
    <span class="synStatement">my</span> <span class="synIdentifier">$self</span> = <span class="synStatement">shift</span>;
    <span class="synStatement">require</span> Moose::Meta::Class;
    ( <span class="synOperator">ref</span> <span class="synIdentifier">$self</span> &amp;&amp; <span class="synIdentifier">$self-&gt;associated_metaclass</span> ) || <span class="synString">&quot;Moose::Meta::Class&quot;</span>;
}

<span class="synKeyword">sub </span><span class="synFunction">throw_error </span>{
    <span class="synStatement">my</span> <span class="synIdentifier">$self</span> = <span class="synStatement">shift</span>;
    <span class="synStatement">my</span> <span class="synIdentifier">$inv</span> = <span class="synIdentifier">$self-&gt;_error_thrower</span>;
    <span class="synStatement">unshift</span> <span class="synIdentifier">@_</span>, <span class="synString">&quot;message&quot;</span> <span class="synConditional">if</span> <span class="synIdentifier">@_</span> % <span class="synNumber">2</span> == <span class="synNumber">1</span>;
    <span class="synStatement">unshift</span> <span class="synIdentifier">@_</span>, <span class="synString">method</span> =&gt; <span class="synIdentifier">$self</span> <span class="synConditional">if</span> <span class="synOperator">ref</span> <span class="synIdentifier">$self</span>;
    <span class="synStatement">unshift</span> <span class="synIdentifier">@_</span>, <span class="synIdentifier">$inv</span>;
    <span class="synStatement">my</span> <span class="synIdentifier">$handler</span> = <span class="synIdentifier">$inv-&gt;can</span>(<span class="synString">&quot;throw_error&quot;</span>);
    <span class="synStatement">goto</span> <span class="synIdentifier">$handler</span>; <span class="synComment"># to avoid incrementing depth by 1</span>
}

<span class="synKeyword">sub </span><span class="synFunction">_inline_throw_error </span>{
    <span class="synStatement">my</span> ( <span class="synIdentifier">$self</span>, <span class="synIdentifier">$msg</span>, <span class="synIdentifier">$args</span> ) = <span class="synIdentifier">@_</span>;

    <span class="synStatement">my</span> <span class="synIdentifier">$inv</span> = <span class="synIdentifier">$self-&gt;_error_thrower</span>;
    <span class="synComment"># </span><span class="synTodo">XXX</span><span class="synComment"> ugh</span>
    <span class="synIdentifier">$inv</span> = <span class="synString">'Moose::Meta::Class'</span> <span class="synConditional">unless</span> <span class="synIdentifier">$inv-&gt;can</span>(<span class="synString">'_inline_throw_error'</span>);

    <span class="synComment"># </span><span class="synTodo">XXX</span><span class="synComment"> ugh ugh UGH</span>
    <span class="synStatement">my</span> <span class="synIdentifier">$class</span> = <span class="synIdentifier">$self-&gt;associated_metaclass</span>;
    <span class="synConditional">if</span> (<span class="synIdentifier">$class</span>) {
        <span class="synStatement">my</span> <span class="synIdentifier">$class_name</span> = B::perlstring(<span class="synIdentifier">$class-&gt;name</span>);
        <span class="synStatement">my</span> <span class="synIdentifier">$meth_name</span> = B::perlstring(<span class="synIdentifier">$self-&gt;name</span>);
        <span class="synIdentifier">$args</span> = <span class="synString">'method =&gt; Class::MOP::class_of('</span> . <span class="synIdentifier">$class_name</span> . <span class="synString">')'</span>
              . <span class="synString">'-&gt;find_method_by_name('</span> . <span class="synIdentifier">$meth_name</span> . <span class="synString">'), '</span>
              . (<span class="synOperator">defined</span> <span class="synIdentifier">$args</span> ? <span class="synIdentifier">$args</span> : <span class="synString">''</span>);
    }

    <span class="synStatement">return</span> <span class="synIdentifier">$inv-&gt;_inline_throw_error</span>(<span class="synIdentifier">$msg</span>, <span class="synIdentifier">$args</span>)
}

<span class="synNumber">1</span>;

<span class="synComment"># ABSTRACT: A Moose Method metaclass</span>

<span class="synComment">__END__</span>

<span class="synStatement">=pod</span>

<span class="synStatement">=head1</span><span class="synString"> NAME</span>

<span class="synperlPOD">Moose::Meta::Method - A Moose Method metaclass</span>

<span class="synStatement">=head1</span><span class="synString"> VERSION</span>

<span class="synperlPOD">version 2.1005</span>

<span class="synStatement">=head1</span><span class="synString"> DESCRIPTION</span>

<span class="synperlPOD">This class is a subclass of </span><span class="synIdentifier">L&lt;Class::MOP::Method&gt;</span><span class="synperlPOD"> that provides</span>
<span class="synperlPOD">additional Moose-specific functionality, all of which is private.</span>

<span class="synperlPOD">To understand this class, you should read the the </span><span class="synIdentifier">L&lt;Class::MOP::Method&gt;</span>
<span class="synperlPOD">documentation.</span>

<span class="synStatement">=head1</span><span class="synString"> INHERITANCE</span>

<span class="synIdentifier">C&lt;Moose::Meta::Method&gt;</span><span class="synperlPOD"> is a subclass of </span><span class="synIdentifier">L&lt;Class::MOP::Method&gt;</span><span class="synperlPOD">.</span>

<span class="synStatement">=head1</span><span class="synString"> BUGS</span>

<span class="synperlPOD">See </span><span class="synIdentifier">L&lt;Moose/BUGS&gt;</span><span class="synperlPOD"> for details on reporting bugs.</span>

<span class="synStatement">=head1</span><span class="synString"> AUTHOR</span>

<span class="synperlPOD">Moose is maintained by the Moose Cabal, along with the help of many contributors. See </span><span class="synIdentifier">L&lt;Moose/CABAL&gt;</span><span class="synperlPOD"> and </span><span class="synIdentifier">L&lt;Moose/CONTRIBUTORS&gt;</span><span class="synperlPOD"> for details.</span>

<span class="synStatement">=head1</span><span class="synString"> COPYRIGHT AND LICENSE</span>

<span class="synperlPOD">This software is copyright (c) 2013 by Infinity Interactive, Inc..</span>

<span class="synperlPOD">This is free software; you can redistribute it and/or modify it under</span>
<span class="synperlPOD">the same terms as the Perl 5 programming language system itself.</span>

<span class="synStatement">=cut</span>
</pre>

 </body>
</html>
